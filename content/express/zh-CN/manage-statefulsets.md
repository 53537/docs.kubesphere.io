---
title: "有状态副本集"
---


*  登录 KubeSphere 管理控制台，访问左侧菜单栏，在**应用负载**菜单下，点击**有状态副本集**按钮，进入有状态副本集列表页面。选择不同的项目，就可以看到对应项目下面的所有有状态副本集。如果是管理员登录，可以看到集群所有项目下的有状态副本集，如果是普通用户，则只能查看授权项目下的所有有状态副本集。  
![](/statefulset_list.png)  

## 创建有状态副本集      
1. 点击右上角**创建有状态副本集**按钮，新建一个有状态副本集。 
![](/statefulset_create_1.png)
2. 目前创建有状态副本集一共有三种方式，**页面创建**，**导入yaml文件**创建，**代码模式**创建。其中**导入yaml**文件方式会自动将yaml文件内容填充到页面上，用户根据需要可以在页面上调整后再行创建。**代码模式**可以方便习惯命令行操作的人员直接在页面上编辑yaml文件并创建有状态副本集。
![](/statefulset_create_8.png)
3. 这里重点介绍**页面创建**的方式。创建时需要输入有状态副本集的名称并选择项目，确定副本数量，用户还可以根据需求填写有状态副本集的描述信息。
![](/statefulset_create_2.png)
4. 在**容器组设置页面**用户可以根据需求对容器组进行配置。容器组可以包含一个或者多个容器。要求输入容器的名称和对应的镜像名。如果用户有更进一步的需求，可以点击**高级选项** 。 高级选项中可以对cpu和内存的资源使用进行限定。其中**requests**是集群保证分配给容器的资源，__limits__是容器可以使用的资源的上限。超过这个限定值，容器会被kill。用户可以通过**命令**和**参数** 选项自定义容器的启动命令和启动参数。**端口**用于指定容器需要暴露的端口，端口协议可以选择TCP和UDP, 用户还可以指定端口与主机端口进行绑定。**环境变量**可以指定容器内部使用的环境变量。上述配置信息填写完成以后，点击下一步。
![](/statefulset_create_3.png)
5. 在存储卷页面可以添加**存储卷模板**，根据用户的配置为有状态副本集的每个容器组生成存储卷。点击**添加存储卷模板**，填写存储卷的名称，选择存储类型，指定容量和访问模式。最后确定挂载点，并且点击挂载和确定。然后点击下一步。
![](/statefulset_create_4.png) 
6. **服务设置**页面用于给有状态副本集创建服务，需要填写服务名称，服务端口和目标端口，目标端口对应容器组的暴露端口。用户可根据需求设置**会话亲和性**，选择完成以后点击下一步。
![](/statefulset_create_5.png) 
7. 标签设置页用于指定有状态副本集对应的一组或者多组标签。
![](/statefulset_create_6.png)  
8. 节点选择器页面，用户可以通过指定一组或者多组键值对来指定期望运行容器组的节点。当不指定时，将会在集群内的任意满足调度条件的节点上启动符合副本数量的容器组。点击右下角的创建后，集群就会按照用户的配置创建对应的有状态副本集。
![](/statefulset_create_7.png) 
 

## 查看有状态副本集详情  
*  在有状态副本集列表页，点击某个有状态副本集的名称，就可以进入到有状态副本集详情页，可以查看有状态副本集的详细信息以及有状态副本集对应的各种资源。
![](/statefulset_read_1.png)
*  同时在本页可以通过左下角的容器组数量栏调整有状态副本集的副本数量，左上角的更多选项编辑配置文件，暂停/开启/删除有状态副本集  
![](/statefulset_read_3.png)
*  当点击容器组列表的容器时，页面会跳转到容器组的详情页。
![](/statefulset_read_2.png)
*  点击容器组详情页的容器列表中的某一容器时，会跳转到容器的详情页，可以看到容器的配置信息，对应资源以及日志。在本页，用户还可以通过左上角的**终端**按钮进入容器内部。
![](/statefulset_read_4.png)


## 编辑有状态副本集
1. 在有状态副本集的列表页和详情页的更多选项中都可以编辑对应的配置文件，编辑是在代码模式下完成的，编辑完成以后，点击右下方的更新按钮，就会按照最新的配置进行更新。
![](/statefulset_update_1.png)
2. 在有状态副本集的详情页左上方的编辑可以对描述信息进行修改。
![](/statefulset_update_2.png)

## 删除有状态副本集
1. 在列表页最右侧的更多选项和详情页的左上方的更多选项中都提供了有状态副本集的删除功能。 
![](/statefulset_delete_1.png)
![](/statefulset_delete_2.png)
